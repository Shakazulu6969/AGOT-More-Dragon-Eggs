namespace = global_events_settings

#Fallback event - select another subject
global_events_settings.0001 = {
	type = character_event
	title = global_events_settings.0001.t
	desc = global_events_settings.0001.desc
	theme = crown
	left_portrait = {
		character = root
		animation = worry
	}
	override_background = {
		reference = study
	}

	option = {
		name = global_events_settings.0001.vs_blades
		trigger_event = agot_valyrian_steel.9999
	}
	option = { # Requires Royal Court
		trigger = {
			has_dlc_feature = royal_court
			has_royal_court = yes
		}
		name = global_events_settings.0001.petitioners
		trigger_event = global_events_settings.0002
	}
	option = {
		name = global_events_settings.0001.dragon_categories
		trigger_event = global_events_settings.1000
	}
	option = { # Requires Friends and Foes
		trigger = {
			has_dlc_feature = friends_and_foes
		}
		name = global_events_settings.0001.house_feuds
		trigger_event = agot_house_maintenance.1000
	}
	option = {
		name = global_events_settings.0001.dragon_trees
		trigger_event = agot_dragon_tree.0001
	}
	option = {
		name = global_events_settings.dismiss
	}
}

#Manage Petitioners and Homage
global_events_settings.0002 = {
	type = character_event
	title = global_events_settings.0002.t
	desc = global_events_settings.0002.desc
	theme = crown
	left_portrait = {
		character = root
		animation = personality_rational
	}
	override_background = {
		reference = study
	}

	option = {
		name = {
			trigger = { has_character_flag = more_homage }
			text = global_events_settings.0002.less_homage
		}
		name = {
			trigger = { NOT = { has_character_flag = more_homage } }
			text = global_events_settings.0002.more_homage
		}

		if = {
			limit = { has_character_flag = more_homage }
			remove_character_flag = more_homage
			custom_tooltip = global_events_settings.0002.less_homage.tt
		}
		else = {
			add_character_flag = more_homage
			custom_tooltip = global_events_settings.0002.more_homage.tt
		}
		trigger_event = global_events_settings.0002
	}

	option = {
		name = {
			trigger = { has_character_flag = no_homage }
			text = global_events_settings.0002.homage_on
		}
		name = {
			trigger = { NOT = { has_character_flag = no_homage } }
			text = global_events_settings.0002.homage_off
		}

		if = {
			limit = { has_character_flag = no_homage }
			remove_character_flag = no_homage
			custom_tooltip = global_events_settings.0002.homage_on.tt
		}
		else = {
			add_character_flag = no_homage
			custom_tooltip = global_events_settings.0002.homage_off.tt
		}
		trigger_event = global_events_settings.0002
	}

	option = {
		name = {
			trigger = { has_character_flag = allow_petitioners }
			text = global_events_settings.0002.petitioners_off
		}
		name = {
			trigger = { NOT = { has_character_flag = allow_petitioners } }
			text = global_events_settings.0002.petitioners_on
		}

		if = {
			limit = { has_character_flag = allow_petitioners }
			remove_character_flag = allow_petitioners
			custom_tooltip = global_events_settings.0002.petitioners_off.tt
		}
		else = {
			add_character_flag = allow_petitioners
			custom_tooltip = global_events_settings.0002.petitioners_on.tt
		}
		trigger_event = global_events_settings.0002
	}

	#Other options
	option = {
		name = global_events_settings.main_screen
		trigger_event = global_events_settings.0001
	}

	#That woould be all
	option = {
		name = global_events_settings.dismiss
	}
}

global_events_settings.1000 = {
	type = character_event
	title = global_events_settings.0001.t
	desc = global_events_settings.0001.desc
	theme = crown
	left_portrait = {
		character = root
		animation = worry
	}
	override_background = {
		reference = study
	}
	# Show me the Dragon Eggs
	option = {
		name = agot_dragon_maintenance.0800.eggs
		trigger = {
			any_artifact = {
				has_variable = dragon_egg
			}
		}
		trigger_event = agot_dragon_maintenance.0804
	}
	# Show me the Dragons
	option = {
		name = agot_dragon_maintenance.0800.show
		trigger = {
			OR = {
				agot_dragon_population_alive = yes
				any_in_global_list = {
					variable = dead_dragons_list
					exists = this
				}
			}
		}
		trigger_event = agot_dragon_maintenance.0800
	}
	option = {
		name = agot_dragon_maintenance.0800.dragonpits
		trigger = {
			mde_live_dragonpits = yes
		}
		trigger_event = agot_dragon_maintenance.0807
	}
	option = {
		name = global_events_settings.main_screen
		trigger_event = global_events_settings.0001
	}
	option = {
		name = global_events_settings.dismiss
	}
}